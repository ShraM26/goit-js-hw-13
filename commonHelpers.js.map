{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nasync function searchImage(query, page) {\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const params = new URLSearchParams({\n    key: '44039917-a1e08adf8a4d452f4e6ec8aba',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: 15,\n  });\n\n  const url = `${BASE_URL}?${params}`;\n  const loader = document.querySelector('.loader');\n  loader.classList.remove('is-hidden');\n  loader.textContent = 'Loading images, please wait...';\n\n  const { data } = await axios.get(`${BASE_URL}?${params}`);\n  return data;\n}\nexport { searchImage };\n","function imageTemplate(image) {\n  return `<li class=\"gallery-item\" data-id=\"${image.id}\">\n        <div class=\"img-container\" >\n        <a class=\"large-image\" href=\"${image.largeImageURL}\">\n        <img class=\"image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        </a> \n        </div>\n        <ul class=\"description-list\" >\n          <li class=\"description-item\"><p class=\"description-item-text\">Likes</p><p class=\"description-item-numb\">${image.likes}</p></li>\n          <li class=\"description-item\"><p class=\"description-item-text\">Views</p><p class=\"description-item-numb\">${image.views}</p></li>\n          <li class=\"description-item\"><p class=\"description-item-text\">Comments</p><p class=\"description-item-numb\">${image.comments}</p></li>\n          <li class=\"description-item\"><p class=\"description-item-text\">Downloads</p><p class=\"description-item-numb\">${image.downloads}</p></li>\n        </ul>\n      </li>`;\n}\nexport function imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchImage } from './js/pixabay-api';\nimport { imagesTemplate } from './js/render-function';\n\nconst iziToastOptions = {\n  message:\n    'Sorry, there are no images matching your search query. Please try again!',\n  messageColor: 'white',\n  messageSize: '16px',\n  backgroundColor: 'red',\n  position: 'topRight',\n  timeout: 5000,\n  drag: true,\n  overlay: true,\n  overlayClose: true,\n};\n\nconst iziToastErr = {\n  message: 'Sorry, something goes wrong!',\n  backgroundColor: 'red',\n  messageColor: 'white',\n  position: 'topRight',\n  timeout: 5000,\n  drag: true,\n  overlay: true,\n  overlayClose: true,\n};\n\nconst iziToastInfo = {\n  message: \"We're sorry, but you've reached the end of search results.\",\n  backgroundColor: 'orange',\n  messageColor: 'white',\n  position: 'topRight',\n  timeout: 5000,\n  drag: true,\n  overlay: true,\n  overlayClose: true,\n};\n\nconst formElem = document.querySelector('.form');\nconst imagesList = document.querySelector('.images-container');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.more-btn');\nconst lightbox = new SimpleLightbox('.large-image', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nformElem.addEventListener('submit', getImages);\nloadMoreBtn.addEventListener('click', imagesMore);\n\nfunction showLoadMoreBtn(show) {\n  // console.log(`showLoadMoreBtn called with show=${show}`);\n  if (show) {\n    loadMoreBtn.classList.remove('is-hidden');\n  } else {\n    loadMoreBtn.classList.add('is-hidden');\n  }\n  // console.log(`LoadMoreBtn classlist: ${loadMoreBtn.classList}`);\n}\n\nfunction showLoader(show) {\n  if (show) {\n    loader.classList.remove('is-hidden');\n  } else {\n    loader.classList.add('is-hidden');\n  }\n}\n\nlet page = 1;\nlet totalPages = 0;\nlet query = '';\n\nasync function getImages(event) {\n  event.preventDefault();\n\n  imagesList.innerHTML = '';\n  page = 1;\n\n  query = event.target.elements.query.value.trim();\n  if (query === '') {\n    iziToast.show({\n      message: 'The field cannot be empty!',\n      position: 'topRight',\n      backgroundColor: 'red',\n    });\n    return;\n  }\n  showLoader(true);\n\n  try {\n    const data = await searchImage(query, page);\n\n    if (data.hits.length === 0) {\n      iziToast.show(iziToastOptions);\n      showLoadMoreBtn(false);\n    } else {\n      const markup = imagesTemplate(data.hits);\n      imagesList.innerHTML = markup;\n      lightbox.refresh();\n    }\n\n    totalPages = Math.ceil(data.totalHits / 15);\n    // console.log(`total pages: ${totalPages}`);\n\n    if (totalPages > 1) {\n      showLoadMoreBtn(true);\n    } else {\n      showLoadMoreBtn(false);\n    }\n  } catch (error) {\n    iziToast.show(iziToastErr);\n    showLoadMoreBtn(false);\n  } finally {\n    showLoader(false);\n  }\n\n  formElem.reset();\n}\n\nasync function imagesMore() {\n  page += 1;\n\n  showLoader(true);\n\n  try {\n    const data = await searchImage(query, page);\n    const markup = imagesTemplate(data.hits);\n    imagesList.innerHTML += markup;\n    lightbox.refresh();\n\n    if (page >= totalPages) {\n      showLoadMoreBtn(false);\n      iziToast.info(iziToastInfo);\n    }\n  } catch (error) {\n    // console.log(error);\n    iziToast.show(iziToastErr);\n  } finally {\n    showLoader(false);\n    if (page < totalPages) {\n      showLoadMoreBtn(true);\n    }\n  }\n}\n"],"names":["searchImage","query","page","BASE_URL","params","loader","data","axios","imageTemplate","image","imagesTemplate","arr","iziToastOptions","iziToastErr","iziToastInfo","formElem","imagesList","loadMoreBtn","lightbox","SimpleLightbox","getImages","imagesMore","showLoadMoreBtn","show","showLoader","totalPages","event","iziToast","markup"],"mappings":"+vBAEA,eAAeA,EAAYC,EAAOC,EAAM,CACtC,MAAMC,EAAW,2BAEXC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACd,CAAG,EAGKG,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,UAAU,OAAO,WAAW,EACnCA,EAAO,YAAc,iCAErB,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAM,IAAI,GAAGJ,CAAQ,IAAIC,CAAM,EAAE,EACxD,OAAOE,CACT,CCtBA,SAASE,EAAcC,EAAO,CAC5B,MAAO,qCAAqCA,EAAM,EAAE;AAAA;AAAA,uCAEfA,EAAM,aAAa;AAAA,kCACxBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,oHAI4CA,EAAM,KAAK;AAAA,oHACXA,EAAM,KAAK;AAAA,uHACRA,EAAM,QAAQ;AAAA,wHACbA,EAAM,SAAS;AAAA;AAAA,YAGvI,CACO,SAASC,EAAeC,EAAK,CAClC,OAAOA,EAAI,IAAIH,CAAa,EAAE,KAAK,EAAE,CACvC,CCRA,MAAMI,EAAkB,CACtB,QACE,2EACF,aAAc,QACd,YAAa,OACb,gBAAiB,MACjB,SAAU,WACV,QAAS,IACT,KAAM,GACN,QAAS,GACT,aAAc,EAChB,EAEMC,EAAc,CAClB,QAAS,+BACT,gBAAiB,MACjB,aAAc,QACd,SAAU,WACV,QAAS,IACT,KAAM,GACN,QAAS,GACT,aAAc,EAChB,EAEMC,EAAe,CACnB,QAAS,6DACT,gBAAiB,SACjB,aAAc,QACd,SAAU,WACV,QAAS,IACT,KAAM,GACN,QAAS,GACT,aAAc,EAChB,EAEMC,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAa,SAAS,cAAc,mBAAmB,EACvDX,EAAS,SAAS,cAAc,SAAS,EACzCY,EAAc,SAAS,cAAc,WAAW,EAChDC,EAAW,IAAIC,EAAe,eAAgB,CAClD,aAAc,IACd,aAAc,KAChB,CAAC,EAEDJ,EAAS,iBAAiB,SAAUK,CAAS,EAC7CH,EAAY,iBAAiB,QAASI,CAAU,EAEhD,SAASC,EAAgBC,EAAM,CAEzBA,EACFN,EAAY,UAAU,OAAO,WAAW,EAExCA,EAAY,UAAU,IAAI,WAAW,CAGzC,CAEA,SAASO,EAAWD,EAAM,CACpBA,EACFlB,EAAO,UAAU,OAAO,WAAW,EAEnCA,EAAO,UAAU,IAAI,WAAW,CAEpC,CAEA,IAAIH,EAAO,EACPuB,EAAa,EACbxB,EAAQ,GAEZ,eAAemB,EAAUM,EAAO,CAO9B,GANAA,EAAM,eAAc,EAEpBV,EAAW,UAAY,GACvBd,EAAO,EAEPD,EAAQyB,EAAM,OAAO,SAAS,MAAM,MAAM,OACtCzB,IAAU,GAAI,CAChB0B,EAAS,KAAK,CACZ,QAAS,6BACT,SAAU,WACV,gBAAiB,KACvB,CAAK,EACD,MACD,CACDH,EAAW,EAAI,EAEf,GAAI,CACF,MAAMlB,EAAO,MAAMN,EAAYC,EAAOC,CAAI,EAE1C,GAAII,EAAK,KAAK,SAAW,EACvBqB,EAAS,KAAKf,CAAe,EAC7BU,EAAgB,EAAK,MAChB,CACL,MAAMM,EAASlB,EAAeJ,EAAK,IAAI,EACvCU,EAAW,UAAYY,EACvBV,EAAS,QAAO,CACjB,CAEDO,EAAa,KAAK,KAAKnB,EAAK,UAAY,EAAE,EAGtCmB,EAAa,EACfH,EAAgB,EAAI,EAEpBA,EAAgB,EAAK,CAExB,MAAe,CACdK,EAAS,KAAKd,CAAW,EACzBS,EAAgB,EAAK,CACzB,QAAY,CACRE,EAAW,EAAK,CACjB,CAEDT,EAAS,MAAK,CAChB,CAEA,eAAeM,GAAa,CAC1BnB,GAAQ,EAERsB,EAAW,EAAI,EAEf,GAAI,CACF,MAAMlB,EAAO,MAAMN,EAAYC,EAAOC,CAAI,EACpC0B,EAASlB,EAAeJ,EAAK,IAAI,EACvCU,EAAW,WAAaY,EACxBV,EAAS,QAAO,EAEZhB,GAAQuB,IACVH,EAAgB,EAAK,EACrBK,EAAS,KAAKb,CAAY,EAE7B,MAAe,CAEda,EAAS,KAAKd,CAAW,CAC7B,QAAY,CACRW,EAAW,EAAK,EACZtB,EAAOuB,GACTH,EAAgB,EAAI,CAEvB,CACH"}